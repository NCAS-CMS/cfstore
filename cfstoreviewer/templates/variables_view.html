<!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta charset="UTF-8">
        <link rel="stylesheet" href="{% static '/cfstore.css' %}">
    <style>
 /* unvisited link */
 a:link {
  color: #030303;
}

/* visited link */
a:visited {
  color: #030303;
}

/* mouse over link */
a:hover {
  color: #186f4d;
}

/* selected link */
a:active {
  color: #030303;
} 
    .dropbtn {
      background-color: #030303;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
    }
    
    .dropdown {
      position: relative;
      display: inline-block;
    }
    
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }
    
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }
    
    .dropdown-content a:hover {background-color: #ddd;}
    
    .dropdown:hover .dropdown-content {display: block;}
    
    .dropdown:hover .dropbtn {background-color: #030303;}
    
    table, th, td {
        border:1px solid black;
      }

      /* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
    </style>

    </head>
    <body>
      <h2>Versions</h2>
      <div class="tab">
        {% for prop in variable|getvariablepropertykeys %}
        <button class="tablinks" onclick="openVar(event, '{{prop}}')">{{prop}}</button>
        {% endfor %}
      </div>

      {% for prop,value in variable|getvariablepropertyitems %}
         <div id="{{prop}}" class="tabcontent">

        <table border="1"><tr><td>
            <table border="1">
                <tr><h3><a href="">{{variable|outputvar}}</a><h3></tr>
                    <tr><th>Domain</th><td>{{variable.cfdm_domain}}</td></tr>
                    <tr><th>Size</th><td>{{variable.cfdm_size}}</td></tr>
                    <tr>   
                        <th>Collections</th>
                        <td>
                          <div class="dropdown">
                            <button class="dropbtn">{{colcount}} Collections</button>
                            <div class="dropdown-content">
                                {% for col in variable|getcollectionsfromvariable %}
                                    <a href="../{{col.name}}">{{col.name}}</a>
                                {% endfor %}
                            </div>
                          </div> 
                        </td>
                    </tr>
                    <tr>   
                      <th>Properties</th>
                      <td>
                        <div class="dropdown">
                          <button class="dropbtn">Properties</button>
                          <div class="dropdown-content">
                              {% for key,val in value.items %}
                                  <a>{{key}}|{{val}}</a>
                              {% endfor %}
                          </div>
                        </div> 
                      </td>
                  </tr>
            </table>
            <form action="{{variable.identity}}/{{prop}}/download/" method="post">
              {% csrf_token %}
              <input type="hidden" id="collection" name="collection" value="{{collection.name}}"> 
              <input type="hidden" id="checks" name="checks" value="{{checks}}"> 
              <input type="submit" value="Download Variable" />
            </form>
            </tr></td></table>
            </div>
            <script>
              document.getElementById("{{variable.id}}").click();
            </script>
        {% endfor %}
        <!-- Navigation  -->
        <nav>
        </nav>
        <!-- End Navigation-->
        <script>
          function openVar(evt, varID) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
              tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
              tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(varID).style.display = "block";
            evt.currentTarget.className += " active";
          }
          </script>
             
    </body>
</html>